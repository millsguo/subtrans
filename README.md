# subtrans
使用机器翻译自动翻译电影和剧集的字幕，最新剧集不用苦等字幕
推荐搭配sonarr,radarr,emby，程序支持sonarr、radarr的目录结构，读取emby的nfo元数据

```
docker pull millsguo/subtrans
```

### 第一步，配置存储空间，设置挂载目录，目前暂时支持以下6个挂载目录
````
#主机目录        docker装载路径
/应用配置目录     /app/config
/第一个电影目录   /data/movies-1
/第二个电影目录   /data/movies-2
/第三个电影目录   /data/movies-3
/第一个剧集目录   /data/tv-1
/第二个剧集目录   /data/tv-2
/第三个剧集目录   /data/tv-3
````

### 第二步，配置docker环境参数，增加以下参数
````
PGID=推荐使用EMBY账号的GID，用于读取电影或剧集目录
PUID=推荐使用EMBY账号的UID，用于读取电影或剧集目录

端口配置：
6550 web端口
````

### 第三步，启动docker容器，用浏览器打开主机【IP:6550】,系统自动进入配置页，配置好翻译接口后，在电影库和剧集库点击扫描

### 处理逻辑如下

- 检查视频文件是否内置中文字幕，有，忽略此文件；否，执行下一步
- 检查视频文件是否内置英文字幕，有，导出英文字幕至视频所在目录；
- 检查当前目录是否有外挂中文字幕，有，忽略
- 检查当前目录是否有外挂英文字幕，有，调用翻译接口翻译英文字幕后，保存至视频所在目录；没有，忽略

### 支持处理手动下载的字幕文件

- 手动下载剧集字幕文件请使用s01e01.zip之类格式
- 手动下载电影字幕文件请使用s00e00.zip命名
- 整季字幕包请使用s01.zip命名
- 所有字幕文件保存到视频目录
